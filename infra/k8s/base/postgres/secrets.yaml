# =============================================================================
# SECRET.YAML - POSTGRESQL CREDENTIALS
# =============================================================================
# Kubernetes Secrets store sensitive data like passwords, tokens, and keys.
# Secrets are base64 encoded (NOT encrypted by default).
#
# IMPORTANT SECURITY NOTES:
# -------------------------
# 1. NEVER commit real production secrets to Git!
# 2. This file contains EXAMPLE values for development only
# 3. For production, use:
#    - Sealed Secrets (Bitnami)
#    - External Secrets Operator
#    - HashiCorp Vault
#    - Cloud provider secret managers (AWS Secrets Manager, etc.)
#
# Base64 Encoding:
# ----------------
# Values must be base64 encoded. To encode a value:
#   echo -n "your-value" | base64
#
# To decode:
#   echo "base64-string" | base64 -d
#
# Example:
#   echo -n "casino_admin" | base64
#   # Output: Y2FzaW5vX2FkbWlu
#
# Usage in Pods:
# --------------
# Secrets can be mounted as:
#   1. Environment variables (shown below)
#   2. Files in a volume
#
# Commands:
#   kubectl apply -f secret.yaml -n casino
#   kubectl get secrets -n casino
#   kubectl describe secret postgres-secret -n casino
#   kubectl get secret postgres-secret -n casino -o jsonpath='{.data.password}' | base64 -d
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: postgres-secret
  namespace: casino
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: database
    app.kubernetes.io/part-of: casino-capstone
  annotations:
    description: "PostgreSQL database credentials for Casino Capstone"
    # Warning annotation to remind about security
    warning: "DEVELOPMENT ONLY - Use Sealed Secrets or external secret manager for production"
    
# Type of secret - Opaque is for arbitrary user-defined data
type: Opaque

# Base64 encoded data
# CHANGE THESE VALUES FOR PRODUCTION!
data:
  # PostgreSQL admin username
  # Decoded: casino_admin
  username: Y2FzaW5vX2FkbWlu
  
  # PostgreSQL admin password
  # Decoded: casino_secret_password_123
  # Generate a strong password for production: openssl rand -base64 32
  password: Y2FzaW5vX3NlY3JldF9wYXNzd29yZF8xMjM=
  
  # Database name
  # Decoded: casino_db
  database: Y2FzaW5vX2Ri
  
  # Full connection string for applications
  # Decoded: postgres://casino_admin:casino_secret_password_123@postgres:5432/casino_db?sslmode=disable
  # Note: 'postgres' is the service name within Kubernetes
  database-url: cG9zdGdyZXM6Ly9jYXNpbm9fYWRtaW46Y2FzaW5vX3NlY3JldF9wYXNzd29yZF8xMjNAcG9zdGdyZXM6NTQzMi9jYXNpbm9fZGI/c3NsbW9kZT1kaXNhYmxl

---
# =============================================================================
# JWT SECRET FOR BACKEND API
# =============================================================================
# This secret stores the JWT signing key used for authentication tokens.
#
# IMPORTANT: Generate a unique, strong secret for production!
#   openssl rand -base64 64
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: jwt-secret
  namespace: casino
  labels:
    app.kubernetes.io/name: backend
    app.kubernetes.io/component: auth
    app.kubernetes.io/part-of: casino-capstone
  annotations:
    description: "JWT signing secret for authentication"
    warning: "DEVELOPMENT ONLY - Generate a unique secret for production"
type: Opaque
data:
  # JWT signing secret
  # Decoded: your-super-secret-jwt-key-change-in-production-abc123
  # Generate for production: openssl rand -base64 64 | tr -d '\n' | base64
  secret: eW91ci1zdXBlci1zZWNyZXQtand0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbi1hYmMxMjM=

---
# =============================================================================
# HELPER: HOW TO CREATE SECRETS FROM COMMAND LINE
# =============================================================================
# Instead of manually base64 encoding, you can create secrets directly:
#
# Create from literal values:
#   kubectl create secret generic postgres-secret \
#     --from-literal=username=casino_admin \
#     --from-literal=password=casino_secret_password_123 \
#     --from-literal=database=casino_db \
#     --from-literal=database-url='postgres://casino_admin:casino_secret_password_123@postgres:5432/casino_db?sslmode=disable' \
#     -n casino
#
# Create from file:
#   kubectl create secret generic postgres-secret \
#     --from-file=password=./password.txt \
#     -n casino
#
# Create from .env file:
#   kubectl create secret generic app-secrets \
#     --from-env-file=.env.production \
#     -n casino
# =============================================================================